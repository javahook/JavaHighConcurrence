# java高并发之秒杀系统

来源：[慕课网(yijun zhang)](https://www.imooc.com/u/2145618/courses?sort=publish)

内容：

- 讲解SSM整合技巧
- 秒杀类系统需求理解和实现
- 常用技术解决高并发问题

本课程能学到什么？

- 初学者：框架的使用与整合技巧
- 有经验者：秒杀分析过程和优化思路

用到的技术(学到的知识)：

- MySQL：表设计，SQL技巧，事务和行级锁
- MyBatis：DAO层设计与开发，MyBatis合理使用，MyBatis与Spring整合
- Spring：Spring IOC整合Service，声明式事务运用
- Spring MVC：Restful接口设计和使用，框架运作流程，Controller开发技巧
- 前端：交互设计，Bootstrap，jQuery

## 第一部分 ：业务分析与DAO层
### 创建项目和项目依赖
项目依赖包含四大部分

- 日志相关依赖

  - 
    java日志有：slf4j，log4j，logback，common-logging
    其中 slf4j 是规范/接口
    日志实现：log4j, logback, common-logging
    本项目使用：slf4j + logback
- 数据库相关依赖
  - mysql驱动和c3p0连接池依赖
  - mybatis依赖，mybatis自身与spring整合依赖，
- servlet-web相关依赖
  - taglibs，jstl，jackson，servlet-api
- spring相关依赖
  - spring核心依赖：core beans context
  - spring DAO层依赖：jdbc，tx
  - spring web依赖： web，web mvc
  - spring 测试依赖：test
###秒杀系统业务分析

**业务流程**

<img  src="https://github.com/AlexanderWei666/JavaHighConcurrence/raw/master/picture/秒杀系统业务流程.png" width="800" align=center />

**秒杀业务的核心→库存的处理**

<img  src="https://github.com/AlexanderWei666/JavaHighConcurrence/raw/master/picture/用户针对库存业务分析.png" width="800" align=center />

**购买行为包括**：谁购买成功了，成功的时间/有效期，付款/发货信息

###MySQL秒杀的难点-"竞争“
**事务+行级锁**
**事务：**
- start transaction
- update 库存数量 （竞争就在这里）
- insert 购买明细
- commit

**行级锁**
<img  src="https://github.com/AlexanderWei666/JavaHighConcurrence/raw/master/picture/秒杀行级锁.png" width="800" align=center />

